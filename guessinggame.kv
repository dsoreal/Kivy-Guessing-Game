#:import random random

ScreenManager:
    WannaPlay:
    Guesses:
    TimeToGuess:
    Winner:
    Loser:


<WannaPlay>:
    name: 'start'
    GridLayout:
        cols: 1
        Label:
            text: 'Want to Play the Guessing Game?'

        GridLayout:
            cols: 2

            Button:
                name: 'yes'
                text: 'Yes'
                on_release:
                    root.manager.transition.duration = 0
                    root.manager.current = 'guess_choice'

            Button:
                name: 'no'
                text: 'No'
                on_release:
                    app.stop()


<Guesses>
    name: 'guess_choice'
    id: guesses_choice
    GridLayout:
        cols: 1

        Label:
            text: 'You Will Have 3 guesses. Are You Ready?'
        Button:
            name: 'yes_guess'
            text: 'YES'
            on_release:
                root.SetText()
                root.manager.current = 'time_to_guess'
                root.manager.transition.duration = 0
                app.guesses_left = int(3)
                root.manager.get_screen('time_to_guess').LabelText = app.guess_text






<TimeToGuess>

    name: 'time_to_guess'
    GridLayout:
        cols: 1

        Label:
            text: 'Guess a number between 1 and 10'
        Label:
            id: guesses_left
            text: root.LabelText

        GridLayout:
            cols: 5

            Button:
                text: '1'
                on_release:
                    app.user_guess = '1'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '2'
                on_release:
                    app.user_guess = '2'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '3'
                on_release:
                    app.user_guess = '3'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '4'
                on_release:
                    app.user_guess = '4'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '5'
                on_release:
                    app.user_guess = '5'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '6'
                on_release:
                    app.user_guess = '6'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '7'
                on_release:
                    app.user_guess = '7'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '8'
                on_release:
                    app.user_guess = '8'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '9'
                on_release:
                    app.user_guess = '9'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0
            Button:
                text: '10'
                on_release:
                    app.user_guess = '10'
                    app.guesses_left = int(app.guesses_left) - int(1)
                    root.LabelText = 'Guesses Left: ' + str(app.guesses_left)
                    root.manager.current = 'winner' if app.user_guess == app.random_num else 'loser' if app.user_guess != app.random_num and app.guesses_left == int(0) else 'time_to_guess'
                    root.manager.transition.direction = 'left'
                    root.manager.transition.duration = 0





<Winner>
    name: 'winner'
    GridLayout:
        cols: 1
        Label:
            text: 'You have Won!'
        Label:
            text: 'Would You Like To Play Again?'
        GridLayout:
            cols: 2
            Button:
                text: 'Yes'
                on_release:
                    app.guesses_left = int(3)
                    root.manager.current = 'guess_choice'
                    root.manager.transition.duration = 0
                    app.computer_num = random.randint(1, 10)
                    app.random_num = str(app.computer_num)
                    print(app.random_num)



            Button:
                text: 'No'
                on_release:
                    app.stop()
<Loser>
    name: 'loser'
    GridLayout:
        cols: 1
        Label:
            text:'You have Lost!'
        Label:
            text: 'Would You Like To Play Again?'
        GridLayout:
            cols: 2
            Button:
                text: 'Yes'
                on_press:
                    root.manager.current = 'guess_choice'
                    root.manager.transition.duration = 0
                    app.computer_num = random.randint(1, 10)
                    app.random_num = str(app.computer_num)
                    print(app.random_num)


            Button:
                text: 'No'
                on_release:
                    app.stop()